{"ast":null,"code":"import React,{useState,useEffect}from'react';import{motion}from'framer-motion';import{BookOpenIcon,PlayIcon,StopIcon,HeartIcon,ClockIcon,UserIcon,SpeakerWaveIcon}from'@heroicons/react/24/outline';import{HeartIcon as HeartSolidIcon}from'@heroicons/react/24/solid';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BACKEND_URL=process.env.REACT_APP_BACKEND_URL;const StoriesPage=_ref=>{let{user,sessionId}=_ref;const[stories,setStories]=useState([]);const[selectedCategory,setSelectedCategory]=useState('all');const[isLoading,setIsLoading]=useState(true);const[favorites,setFavorites]=useState([]);const[currentlyPlaying,setCurrentlyPlaying]=useState(null);const[storyAudio,setStoryAudio]=useState(null);const[isStoryPaused,setIsStoryPaused]=useState(false);const[storyProgress,setStoryProgress]=useState(0);const categories=[{id:'all',name:'All Stories',emoji:'📚'},{id:'fairy_tales',name:'Fairy Tales',emoji:'🧚'},{id:'adventures',name:'Adventures',emoji:'🗺️'},{id:'animals',name:'Animals',emoji:'🐾'},{id:'educational',name:'Educational',emoji:'🎓'},{id:'bedtime',name:'Bedtime',emoji:'🌙'}];useEffect(()=>{fetchStories();loadFavorites();},[user===null||user===void 0?void 0:user.id]);const fetchStories=async()=>{try{setIsLoading(true);const response=await fetch(\"\".concat(BACKEND_URL,\"/api/content/stories\"),{headers:{'Content-Type':'application/json'}});if(response.ok){const data=await response.json();setStories(data.stories||[]);}else{throw new Error('Failed to fetch stories');}}catch(error){console.error('Error fetching stories:',error);toast.error('Failed to load stories');// Set some default stories for demo\nsetStories([{id:'1',title:'The Little Red Riding Hood',description:'A classic tale of a girl visiting her grandmother',category:'fairy_tales',duration:'5 min',age_group:'3-8',content:\"Once upon a time, there was a little girl who lived in a village near the forest. She always wore a red riding cloak, so everyone called her Little Red Riding Hood.\\n\\nOne day, her mother said, \\\"Little Red Riding Hood, take this basket of food to your grandmother. She lives in the cottage in the forest, and she's feeling unwell.\\\"\\n\\nLittle Red Riding Hood set off through the forest. Along the way, she met a big, bad wolf. \\\"Where are you going, little girl?\\\" asked the wolf with a sly smile.\\n\\n\\\"I'm going to my grandmother's cottage to bring her some food,\\\" said Little Red Riding Hood innocently.\\n\\nThe wolf had a wicked plan. He ran ahead to the grandmother's cottage and knocked on the door. When the grandmother opened it, he swallowed her up in one gulp! Then he put on her nightgown and cap and got into her bed.\\n\\nWhen Little Red Riding Hood arrived, she noticed something strange. \\\"Oh grandmother,\\\" she said, \\\"what big eyes you have!\\\"\\n\\n\\\"All the better to see you with,\\\" replied the wolf.\\n\\n\\\"And grandmother, what big ears you have!\\\"\\n\\n\\\"All the better to hear you with.\\\"\\n\\n\\\"And grandmother, what big teeth you have!\\\"\\n\\n\\\"All the better to eat you with!\\\" roared the wolf, jumping out of bed.\\n\\nJust then, a huntsman who was passing by heard the commotion. He burst into the cottage and saved Little Red Riding Hood and her grandmother.\\n\\nFrom that day on, Little Red Riding Hood always stayed on the path and never talked to strangers in the forest.\\n\\nThe End.\"},{id:'2',title:'The Three Little Pigs',description:'Three pigs build houses to protect themselves from the big bad wolf',category:'fairy_tales',duration:'6 min',age_group:'3-7',content:\"Once upon a time, there were three little pigs who decided to build their own houses.\\n\\nThe first little pig was lazy and built his house out of straw. It was quick and easy, but not very strong.\\n\\nThe second little pig built his house out of sticks. It was a bit stronger than straw, but still not very sturdy.\\n\\nThe third little pig worked hard all day and built his house out of bricks. It was strong and solid.\\n\\nOne day, a big bad wolf came to the first pig's house. \\\"Little pig, little pig, let me come in!\\\" he called.\\n\\n\\\"Not by the hair on my chinny-chin-chin!\\\" replied the first pig.\\n\\n\\\"Then I'll huff, and I'll puff, and I'll blow your house in!\\\" The wolf blew down the straw house easily, and the first pig ran to his brother's stick house.\\n\\nThe wolf followed and said, \\\"Little pigs, little pigs, let me come in!\\\"\\n\\n\\\"Not by the hair on our chinny-chin-chins!\\\"\\n\\n\\\"Then I'll huff, and I'll puff, and I'll blow your house in!\\\" The wolf blew down the stick house too, and both pigs ran to their brother's brick house.\\n\\nWhen the wolf reached the brick house, he huffed and puffed with all his might, but the house was too strong. He couldn't blow it down!\\n\\nThe wolf tried to climb down the chimney, but the clever third pig had a pot of boiling water ready. The wolf fell into the pot and ran away, never to bother the three little pigs again.\\n\\nThe first two pigs learned their lesson and built strong brick houses too.\\n\\nThe End.\"},{id:'3',title:'The Tortoise and the Hare',description:'A classic fable about perseverance and determination',category:'educational',duration:'4 min',age_group:'4-10',content:\"Once upon a time, in a peaceful meadow, there lived a speedy hare and a slow-moving tortoise.\\n\\nThe hare was very proud of how fast he could run. He would often boast to all the other animals, \\\"I'm the fastest animal in the whole forest! No one can beat me in a race!\\\"\\n\\nOne day, the tortoise, who was tired of listening to the hare's bragging, said quietly, \\\"I challenge you to a race.\\\"\\n\\nAll the animals laughed. \\\"You want to race the hare?\\\" they giggled. \\\"But you're so slow!\\\"\\n\\nThe hare laughed the loudest. \\\"This will be the easiest race I've ever won!\\\" he said.\\n\\nThe fox offered to be the judge, and all the animals gathered to watch the race. The fox marked the starting line and the finish line, which was on the other side of the meadow.\\n\\n\\\"Ready, set, go!\\\" called the fox.\\n\\nThe hare zoomed off like lightning, leaving the tortoise far behind. Soon, the hare was so far ahead that he couldn't even see the tortoise anymore.\\n\\n\\\"This is too easy,\\\" thought the hare. \\\"I have plenty of time. I think I'll take a little nap under this shady tree.\\\"\\n\\nThe hare curled up under the tree and fell fast asleep.\\n\\nMeanwhile, the tortoise kept moving slowly but steadily. Step by step, he made his way across the meadow. He passed the sleeping hare and continued toward the finish line.\\n\\nWhen the hare woke up, the sun was setting. He stretched and yawned, then remembered the race. He looked toward the finish line and couldn't believe his eyes. There was the tortoise, just steps away from winning!\\n\\nThe hare ran as fast as he could, but it was too late. The tortoise crossed the finish line first!\\n\\nAll the animals cheered for the tortoise. The hare learned an important lesson that day: \\\"Slow and steady wins the race.\\\"\\n\\nThe End.\"}]);}finally{setIsLoading(false);}};const loadFavorites=()=>{const savedFavorites=localStorage.getItem(\"favorites_\".concat(user===null||user===void 0?void 0:user.id));if(savedFavorites){setFavorites(JSON.parse(savedFavorites));}};const toggleFavorite=storyId=>{const newFavorites=favorites.includes(storyId)?favorites.filter(id=>id!==storyId):[...favorites,storyId];setFavorites(newFavorites);localStorage.setItem(\"favorites_\".concat(user===null||user===void 0?void 0:user.id),JSON.stringify(newFavorites));toast.success(favorites.includes(storyId)?'Removed from favorites':'Added to favorites');};const playStory=async story=>{try{setCurrentlyPlaying(story.id);setIsStoryPaused(false);// Request the full story to be narrated (not interactive conversation)\nconst response=await fetch(\"\".concat(BACKEND_URL,\"/api/content/stories/\").concat(story.id,\"/narrate\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user_id:user===null||user===void 0?void 0:user.id,full_narration:true,// Flag to indicate we want full story, not conversation\nvoice_personality:(user===null||user===void 0?void 0:user.voice_personality)||'friendly_companion'})});if(response.ok){const data=await response.json();if(data.response_audio){// Play the full story audio\nconst audioBlob=new Blob([Uint8Array.from(atob(data.response_audio),c=>c.charCodeAt(0))],{type:'audio/mpeg'});const audioUrl=URL.createObjectURL(audioBlob);const audio=new Audio(audioUrl);audio.onloadedmetadata=()=>{setStoryProgress(0);audio.play();};audio.ontimeupdate=()=>{if(audio.duration>0){setStoryProgress(audio.currentTime/audio.duration*100);}};audio.onended=()=>{setCurrentlyPlaying(null);setStoryAudio(null);setStoryProgress(0);toast.success('Story completed! 📖');};audio.onerror=()=>{toast.error('Error playing story audio');setCurrentlyPlaying(null);setStoryAudio(null);};setStoryAudio(audio);}else{throw new Error('No audio received for story');}}else{throw new Error('Failed to get story narration');}}catch(error){console.error('Error playing story:',error);toast.error('Failed to play story');setCurrentlyPlaying(null);setStoryAudio(null);}};const pauseStory=()=>{if(storyAudio&&!isStoryPaused){storyAudio.pause();setIsStoryPaused(true);}};const resumeStory=()=>{if(storyAudio&&isStoryPaused){storyAudio.play();setIsStoryPaused(false);}};const stopStory=()=>{if(storyAudio){storyAudio.pause();storyAudio.currentTime=0;setCurrentlyPlaying(null);setStoryAudio(null);setIsStoryPaused(false);setStoryProgress(0);}};const filteredStories=selectedCategory==='all'?stories:stories.filter(story=>story.category===selectedCategory);return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto\",children:[/*#__PURE__*/_jsxs(motion.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:\"text-center mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center mb-4\",children:[/*#__PURE__*/_jsx(BookOpenIcon,{className:\"w-12 h-12 text-purple-600 mr-3\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent\",children:\"Story Time\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 text-lg\",children:[\"Discover magical stories tailored just for you, \",user===null||user===void 0?void 0:user.name,\"! \\uD83D\\uDCDA\\u2728\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap justify-center gap-3 mb-8\",children:categories.map(category=>/*#__PURE__*/_jsxs(motion.button,{onClick:()=>setSelectedCategory(category.id),className:\"px-4 py-2 rounded-full font-medium transition-all duration-200 \".concat(selectedCategory===category.id?'bg-purple-600 text-white shadow-lg':'bg-white text-gray-700 hover:bg-purple-50 border border-gray-200'),whileHover:{scale:1.05},whileTap:{scale:0.95},children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-2\",children:category.emoji}),category.name]},category.id))}),isLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Loading magical stories...\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:filteredStories.map(story=>/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:\"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-200 overflow-hidden\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-900 mb-2\",children:story.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm mb-4\",children:story.description})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleFavorite(story.id),className:\"p-2 rounded-full hover:bg-gray-100 transition-colors\",children:favorites.includes(story.id)?/*#__PURE__*/_jsx(HeartSolidIcon,{className:\"w-6 h-6 text-red-500\"}):/*#__PURE__*/_jsx(HeartIcon,{className:\"w-6 h-6 text-gray-400\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-sm text-gray-500 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(ClockIcon,{className:\"w-4 h-4 mr-1\"}),story.duration]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(UserIcon,{className:\"w-4 h-4 mr-1\"}),\"Ages \",story.age_group]})]}),currentlyPlaying===story.id?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-purple-600 to-pink-600 h-2 rounded-full transition-all duration-300\",style:{width:\"\".concat(storyProgress,\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center space-x-3\",children:[/*#__PURE__*/_jsx(motion.button,{onClick:isStoryPaused?resumeStory:pauseStory,className:\"flex items-center justify-center w-12 h-12 bg-purple-600 hover:bg-purple-700 text-white rounded-full shadow-lg transition-colors\",whileHover:{scale:1.1},whileTap:{scale:0.95},children:isStoryPaused?/*#__PURE__*/_jsx(PlayIcon,{className:\"w-6 h-6 ml-1\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-1 h-4 bg-white rounded-full\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-1 h-4 bg-white rounded-full\"})]})}),/*#__PURE__*/_jsx(motion.button,{onClick:stopStory,className:\"flex items-center justify-center w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-full shadow-lg transition-colors\",whileHover:{scale:1.1},whileTap:{scale:0.95},children:/*#__PURE__*/_jsx(StopIcon,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-sm text-purple-600 font-medium\",children:isStoryPaused?'Story Paused':'Now Playing...'})]}):/*#__PURE__*/_jsxs(motion.button,{onClick:()=>playStory(story),className:\"w-full py-3 rounded-xl font-medium flex items-center justify-center transition-all duration-200 bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-700 hover:to-pink-700 shadow-lg hover:shadow-xl\",whileHover:{scale:1.02},whileTap:{scale:0.98},children:[/*#__PURE__*/_jsx(PlayIcon,{className:\"w-5 h-5 mr-2\"}),\"Listen to Story\"]})]})},story.id))}),filteredStories.length===0&&!isLoading&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(BookOpenIcon,{className:\"w-16 h-16 text-gray-300 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-600 mb-2\",children:\"No stories found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Try selecting a different category\"})]})]})});};export default StoriesPage;","map":{"version":3,"names":["React","useState","useEffect","motion","BookOpenIcon","PlayIcon","StopIcon","HeartIcon","ClockIcon","UserIcon","SpeakerWaveIcon","HeartSolidIcon","toast","jsx","_jsx","jsxs","_jsxs","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","StoriesPage","_ref","user","sessionId","stories","setStories","selectedCategory","setSelectedCategory","isLoading","setIsLoading","favorites","setFavorites","currentlyPlaying","setCurrentlyPlaying","storyAudio","setStoryAudio","isStoryPaused","setIsStoryPaused","storyProgress","setStoryProgress","categories","id","name","emoji","fetchStories","loadFavorites","response","fetch","concat","headers","ok","data","json","Error","error","console","title","description","category","duration","age_group","content","savedFavorites","localStorage","getItem","JSON","parse","toggleFavorite","storyId","newFavorites","includes","filter","setItem","stringify","success","playStory","story","method","body","user_id","full_narration","voice_personality","response_audio","audioBlob","Blob","Uint8Array","from","atob","c","charCodeAt","type","audioUrl","URL","createObjectURL","audio","Audio","onloadedmetadata","play","ontimeupdate","currentTime","onended","onerror","pauseStory","pause","resumeStory","stopStory","filteredStories","className","children","div","initial","y","opacity","animate","map","button","onClick","whileHover","scale","whileTap","style","width","length"],"sources":["/app/frontend/src/components/StoriesPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { \n  BookOpenIcon,\n  PlayIcon,\n  StopIcon,\n  HeartIcon,\n  ClockIcon,\n  UserIcon,\n  SpeakerWaveIcon\n} from '@heroicons/react/24/outline';\nimport { HeartIcon as HeartSolidIcon } from '@heroicons/react/24/solid';\nimport toast from 'react-hot-toast';\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\n\nconst StoriesPage = ({ user, sessionId }) => {\n  const [stories, setStories] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const [isLoading, setIsLoading] = useState(true);\n  const [favorites, setFavorites] = useState([]);\n  const [currentlyPlaying, setCurrentlyPlaying] = useState(null);\n  const [storyAudio, setStoryAudio] = useState(null);\n  const [isStoryPaused, setIsStoryPaused] = useState(false);\n  const [storyProgress, setStoryProgress] = useState(0);\n\n  const categories = [\n    { id: 'all', name: 'All Stories', emoji: '📚' },\n    { id: 'fairy_tales', name: 'Fairy Tales', emoji: '🧚' },\n    { id: 'adventures', name: 'Adventures', emoji: '🗺️' },\n    { id: 'animals', name: 'Animals', emoji: '🐾' },\n    { id: 'educational', name: 'Educational', emoji: '🎓' },\n    { id: 'bedtime', name: 'Bedtime', emoji: '🌙' }\n  ];\n\n  useEffect(() => {\n    fetchStories();\n    loadFavorites();\n  }, [user?.id]);\n\n  const fetchStories = async () => {\n    try {\n      setIsLoading(true);\n      const response = await fetch(`${BACKEND_URL}/api/content/stories`, {\n        headers: {\n          'Content-Type': 'application/json',\n        }\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setStories(data.stories || []);\n      } else {\n        throw new Error('Failed to fetch stories');\n      }\n    } catch (error) {\n      console.error('Error fetching stories:', error);\n      toast.error('Failed to load stories');\n      // Set some default stories for demo\n      setStories([\n        {\n          id: '1',\n          title: 'The Little Red Riding Hood',\n          description: 'A classic tale of a girl visiting her grandmother',\n          category: 'fairy_tales',\n          duration: '5 min',\n          age_group: '3-8',\n          content: `Once upon a time, there was a little girl who lived in a village near the forest. She always wore a red riding cloak, so everyone called her Little Red Riding Hood.\n\nOne day, her mother said, \"Little Red Riding Hood, take this basket of food to your grandmother. She lives in the cottage in the forest, and she's feeling unwell.\"\n\nLittle Red Riding Hood set off through the forest. Along the way, she met a big, bad wolf. \"Where are you going, little girl?\" asked the wolf with a sly smile.\n\n\"I'm going to my grandmother's cottage to bring her some food,\" said Little Red Riding Hood innocently.\n\nThe wolf had a wicked plan. He ran ahead to the grandmother's cottage and knocked on the door. When the grandmother opened it, he swallowed her up in one gulp! Then he put on her nightgown and cap and got into her bed.\n\nWhen Little Red Riding Hood arrived, she noticed something strange. \"Oh grandmother,\" she said, \"what big eyes you have!\"\n\n\"All the better to see you with,\" replied the wolf.\n\n\"And grandmother, what big ears you have!\"\n\n\"All the better to hear you with.\"\n\n\"And grandmother, what big teeth you have!\"\n\n\"All the better to eat you with!\" roared the wolf, jumping out of bed.\n\nJust then, a huntsman who was passing by heard the commotion. He burst into the cottage and saved Little Red Riding Hood and her grandmother.\n\nFrom that day on, Little Red Riding Hood always stayed on the path and never talked to strangers in the forest.\n\nThe End.`\n        },\n        {\n          id: '2',\n          title: 'The Three Little Pigs',\n          description: 'Three pigs build houses to protect themselves from the big bad wolf',\n          category: 'fairy_tales',\n          duration: '6 min',\n          age_group: '3-7',\n          content: `Once upon a time, there were three little pigs who decided to build their own houses.\n\nThe first little pig was lazy and built his house out of straw. It was quick and easy, but not very strong.\n\nThe second little pig built his house out of sticks. It was a bit stronger than straw, but still not very sturdy.\n\nThe third little pig worked hard all day and built his house out of bricks. It was strong and solid.\n\nOne day, a big bad wolf came to the first pig's house. \"Little pig, little pig, let me come in!\" he called.\n\n\"Not by the hair on my chinny-chin-chin!\" replied the first pig.\n\n\"Then I'll huff, and I'll puff, and I'll blow your house in!\" The wolf blew down the straw house easily, and the first pig ran to his brother's stick house.\n\nThe wolf followed and said, \"Little pigs, little pigs, let me come in!\"\n\n\"Not by the hair on our chinny-chin-chins!\"\n\n\"Then I'll huff, and I'll puff, and I'll blow your house in!\" The wolf blew down the stick house too, and both pigs ran to their brother's brick house.\n\nWhen the wolf reached the brick house, he huffed and puffed with all his might, but the house was too strong. He couldn't blow it down!\n\nThe wolf tried to climb down the chimney, but the clever third pig had a pot of boiling water ready. The wolf fell into the pot and ran away, never to bother the three little pigs again.\n\nThe first two pigs learned their lesson and built strong brick houses too.\n\nThe End.`\n        },\n        {\n          id: '3',\n          title: 'The Tortoise and the Hare',\n          description: 'A classic fable about perseverance and determination',\n          category: 'educational',\n          duration: '4 min',\n          age_group: '4-10',\n          content: `Once upon a time, in a peaceful meadow, there lived a speedy hare and a slow-moving tortoise.\n\nThe hare was very proud of how fast he could run. He would often boast to all the other animals, \"I'm the fastest animal in the whole forest! No one can beat me in a race!\"\n\nOne day, the tortoise, who was tired of listening to the hare's bragging, said quietly, \"I challenge you to a race.\"\n\nAll the animals laughed. \"You want to race the hare?\" they giggled. \"But you're so slow!\"\n\nThe hare laughed the loudest. \"This will be the easiest race I've ever won!\" he said.\n\nThe fox offered to be the judge, and all the animals gathered to watch the race. The fox marked the starting line and the finish line, which was on the other side of the meadow.\n\n\"Ready, set, go!\" called the fox.\n\nThe hare zoomed off like lightning, leaving the tortoise far behind. Soon, the hare was so far ahead that he couldn't even see the tortoise anymore.\n\n\"This is too easy,\" thought the hare. \"I have plenty of time. I think I'll take a little nap under this shady tree.\"\n\nThe hare curled up under the tree and fell fast asleep.\n\nMeanwhile, the tortoise kept moving slowly but steadily. Step by step, he made his way across the meadow. He passed the sleeping hare and continued toward the finish line.\n\nWhen the hare woke up, the sun was setting. He stretched and yawned, then remembered the race. He looked toward the finish line and couldn't believe his eyes. There was the tortoise, just steps away from winning!\n\nThe hare ran as fast as he could, but it was too late. The tortoise crossed the finish line first!\n\nAll the animals cheered for the tortoise. The hare learned an important lesson that day: \"Slow and steady wins the race.\"\n\nThe End.`\n        }\n      ]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const loadFavorites = () => {\n    const savedFavorites = localStorage.getItem(`favorites_${user?.id}`);\n    if (savedFavorites) {\n      setFavorites(JSON.parse(savedFavorites));\n    }\n  };\n\n  const toggleFavorite = (storyId) => {\n    const newFavorites = favorites.includes(storyId)\n      ? favorites.filter(id => id !== storyId)\n      : [...favorites, storyId];\n    \n    setFavorites(newFavorites);\n    localStorage.setItem(`favorites_${user?.id}`, JSON.stringify(newFavorites));\n    \n    toast.success(\n      favorites.includes(storyId) ? 'Removed from favorites' : 'Added to favorites'\n    );\n  };\n\n  const playStory = async (story) => {\n    try {\n      setCurrentlyPlaying(story.id);\n      setIsStoryPaused(false);\n      \n      // Request the full story to be narrated (not interactive conversation)\n      const response = await fetch(`${BACKEND_URL}/api/content/stories/${story.id}/narrate`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          user_id: user?.id,\n          full_narration: true, // Flag to indicate we want full story, not conversation\n          voice_personality: user?.voice_personality || 'friendly_companion'\n        })\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        \n        if (data.response_audio) {\n          // Play the full story audio\n          const audioBlob = new Blob([\n            Uint8Array.from(atob(data.response_audio), c => c.charCodeAt(0))\n          ], { type: 'audio/mpeg' });\n          \n          const audioUrl = URL.createObjectURL(audioBlob);\n          const audio = new Audio(audioUrl);\n          \n          audio.onloadedmetadata = () => {\n            setStoryProgress(0);\n            audio.play();\n          };\n          \n          audio.ontimeupdate = () => {\n            if (audio.duration > 0) {\n              setStoryProgress((audio.currentTime / audio.duration) * 100);\n            }\n          };\n          \n          audio.onended = () => {\n            setCurrentlyPlaying(null);\n            setStoryAudio(null);\n            setStoryProgress(0);\n            toast.success('Story completed! 📖');\n          };\n          \n          audio.onerror = () => {\n            toast.error('Error playing story audio');\n            setCurrentlyPlaying(null);\n            setStoryAudio(null);\n          };\n          \n          setStoryAudio(audio);\n        } else {\n          throw new Error('No audio received for story');\n        }\n      } else {\n        throw new Error('Failed to get story narration');\n      }\n    } catch (error) {\n      console.error('Error playing story:', error);\n      toast.error('Failed to play story');\n      setCurrentlyPlaying(null);\n      setStoryAudio(null);\n    }\n  };\n\n  const pauseStory = () => {\n    if (storyAudio && !isStoryPaused) {\n      storyAudio.pause();\n      setIsStoryPaused(true);\n    }\n  };\n\n  const resumeStory = () => {\n    if (storyAudio && isStoryPaused) {\n      storyAudio.play();\n      setIsStoryPaused(false);\n    }\n  };\n\n  const stopStory = () => {\n    if (storyAudio) {\n      storyAudio.pause();\n      storyAudio.currentTime = 0;\n      setCurrentlyPlaying(null);\n      setStoryAudio(null);\n      setIsStoryPaused(false);\n      setStoryProgress(0);\n    }\n  };\n\n  const filteredStories = selectedCategory === 'all' \n    ? stories \n    : stories.filter(story => story.category === selectedCategory);\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 p-4\">\n      <div className=\"max-w-6xl mx-auto\">\n        {/* Header */}\n        <motion.div\n          initial={{ y: -20, opacity: 0 }}\n          animate={{ y: 0, opacity: 1 }}\n          className=\"text-center mb-8\"\n        >\n          <div className=\"flex items-center justify-center mb-4\">\n            <BookOpenIcon className=\"w-12 h-12 text-purple-600 mr-3\" />\n            <h1 className=\"text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent\">\n              Story Time\n            </h1>\n          </div>\n          <p className=\"text-gray-600 text-lg\">\n            Discover magical stories tailored just for you, {user?.name}! 📚✨\n          </p>\n        </motion.div>\n\n        {/* Category Filter */}\n        <div className=\"flex flex-wrap justify-center gap-3 mb-8\">\n          {categories.map((category) => (\n            <motion.button\n              key={category.id}\n              onClick={() => setSelectedCategory(category.id)}\n              className={`px-4 py-2 rounded-full font-medium transition-all duration-200 ${\n                selectedCategory === category.id\n                  ? 'bg-purple-600 text-white shadow-lg'\n                  : 'bg-white text-gray-700 hover:bg-purple-50 border border-gray-200'\n              }`}\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n            >\n              <span className=\"mr-2\">{category.emoji}</span>\n              {category.name}\n            </motion.button>\n          ))}\n        </div>\n\n        {/* Stories Grid */}\n        {isLoading ? (\n          <div className=\"text-center py-12\">\n            <div className=\"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n            <p className=\"text-gray-600\">Loading magical stories...</p>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {filteredStories.map((story) => (\n              <motion.div\n                key={story.id}\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                className=\"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-200 overflow-hidden\"\n              >\n                <div className=\"p-6\">\n                  <div className=\"flex items-start justify-between mb-4\">\n                    <div className=\"flex-1\">\n                      <h3 className=\"text-xl font-bold text-gray-900 mb-2\">\n                        {story.title}\n                      </h3>\n                      <p className=\"text-gray-600 text-sm mb-4\">\n                        {story.description}\n                      </p>\n                    </div>\n                    \n                    <button\n                      onClick={() => toggleFavorite(story.id)}\n                      className=\"p-2 rounded-full hover:bg-gray-100 transition-colors\"\n                    >\n                      {favorites.includes(story.id) ? (\n                        <HeartSolidIcon className=\"w-6 h-6 text-red-500\" />\n                      ) : (\n                        <HeartIcon className=\"w-6 h-6 text-gray-400\" />\n                      )}\n                    </button>\n                  </div>\n\n                  <div className=\"flex items-center justify-between text-sm text-gray-500 mb-4\">\n                    <div className=\"flex items-center\">\n                      <ClockIcon className=\"w-4 h-4 mr-1\" />\n                      {story.duration}\n                    </div>\n                    <div className=\"flex items-center\">\n                      <UserIcon className=\"w-4 h-4 mr-1\" />\n                      Ages {story.age_group}\n                    </div>\n                  </div>\n\n                  {/* Story Audio Controls */}\n                  {currentlyPlaying === story.id ? (\n                    <div className=\"space-y-3\">\n                      {/* Progress Bar */}\n                      <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                        <div \n                          className=\"bg-gradient-to-r from-purple-600 to-pink-600 h-2 rounded-full transition-all duration-300\"\n                          style={{ width: `${storyProgress}%` }}\n                        />\n                      </div>\n                      \n                      {/* Control Buttons */}\n                      <div className=\"flex items-center justify-center space-x-3\">\n                        <motion.button\n                          onClick={isStoryPaused ? resumeStory : pauseStory}\n                          className=\"flex items-center justify-center w-12 h-12 bg-purple-600 hover:bg-purple-700 text-white rounded-full shadow-lg transition-colors\"\n                          whileHover={{ scale: 1.1 }}\n                          whileTap={{ scale: 0.95 }}\n                        >\n                          {isStoryPaused ? (\n                            <PlayIcon className=\"w-6 h-6 ml-1\" />\n                          ) : (\n                            <div className=\"flex space-x-1\">\n                              <div className=\"w-1 h-4 bg-white rounded-full\"></div>\n                              <div className=\"w-1 h-4 bg-white rounded-full\"></div>\n                            </div>\n                          )}\n                        </motion.button>\n                        \n                        <motion.button\n                          onClick={stopStory}\n                          className=\"flex items-center justify-center w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-full shadow-lg transition-colors\"\n                          whileHover={{ scale: 1.1 }}\n                          whileTap={{ scale: 0.95 }}\n                        >\n                          <StopIcon className=\"w-5 h-5\" />\n                        </motion.button>\n                      </div>\n                      \n                      <p className=\"text-center text-sm text-purple-600 font-medium\">\n                        {isStoryPaused ? 'Story Paused' : 'Now Playing...'}\n                      </p>\n                    </div>\n                  ) : (\n                    <motion.button\n                      onClick={() => playStory(story)}\n                      className=\"w-full py-3 rounded-xl font-medium flex items-center justify-center transition-all duration-200 bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-700 hover:to-pink-700 shadow-lg hover:shadow-xl\"\n                      whileHover={{ scale: 1.02 }}\n                      whileTap={{ scale: 0.98 }}\n                    >\n                      <PlayIcon className=\"w-5 h-5 mr-2\" />\n                      Listen to Story\n                    </motion.button>\n                  )}\n                </div>\n              </motion.div>\n            ))}\n          </div>\n        )}\n\n        {filteredStories.length === 0 && !isLoading && (\n          <div className=\"text-center py-12\">\n            <BookOpenIcon className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" />\n            <h3 className=\"text-xl font-semibold text-gray-600 mb-2\">No stories found</h3>\n            <p className=\"text-gray-500\">Try selecting a different category</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default StoriesPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}