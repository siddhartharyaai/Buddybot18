{"ast":null,"code":"var _jsxFileName = \"/app/frontend/src/components/VoiceControl.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { MicrophoneIcon } from '@heroicons/react/24/outline';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VoiceControl = ({\n  onStartAmbientListening,\n  onStopAmbientListening,\n  darkMode\n}) => {\n  _s();\n  const [micStatus, setMicStatus] = useState('offline'); // 'offline', 'requesting', 'ready', 'listening'\n\n  const handleStartVoice = async () => {\n    console.log('🎤 User clicked Start Voice button');\n    setMicStatus('requesting');\n    try {\n      console.log('🎤 Requesting microphone permission...');\n\n      // Request microphone permission with explicit user gesture\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          sampleRate: 44100\n        }\n      });\n      console.log('✅ Microphone permission granted!');\n\n      // Permission granted: proceed with ambient listening\n      const success = await onStartAmbientListening(stream);\n      if (success) {\n        setMicStatus('listening');\n        console.log('🎤 Ambient listening started - ready for \"Hey Buddy\"');\n      } else {\n        setMicStatus('offline');\n        console.error('❌ Failed to start ambient listening');\n      }\n    } catch (error) {\n      console.error('❌ Microphone permission denied:', error);\n      setMicStatus('offline');\n\n      // Provide user guidance\n      if (error.name === 'NotAllowedError') {\n        alert('🎤 Microphone access denied. Please:\\n1. Click the microphone icon in your browser address bar\\n2. Select \"Allow\"\\n3. Refresh the page and try again');\n      } else {\n        alert('🎤 Could not access microphone. Please check your device settings and try again.');\n      }\n    }\n  };\n  const handleStopVoice = () => {\n    console.log('🔇 User clicked Stop Voice button');\n    onStopAmbientListening();\n    setMicStatus('offline');\n  };\n  const getButtonStyle = () => {\n    switch (micStatus) {\n      case 'ready':\n      case 'listening':\n        return 'bg-green-500 text-white shadow-lg shadow-green-500/25 hover:bg-green-600';\n      case 'requesting':\n        return 'bg-yellow-500 text-white shadow-lg shadow-yellow-500/25 animate-pulse';\n      case 'offline':\n      default:\n        return darkMode ? 'bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white' : 'bg-gray-200 text-gray-600 hover:bg-gray-300';\n    }\n  };\n  const getStatusText = () => {\n    switch (micStatus) {\n      case 'requesting':\n        return 'Requesting permission...';\n      case 'ready':\n        return 'Voice ready - waiting for wake word';\n      case 'listening':\n        return 'Always On - Say \"Hey Buddy\"';\n      case 'offline':\n      default:\n        return 'Offline';\n    }\n  };\n  const getButtonText = () => {\n    switch (micStatus) {\n      case 'requesting':\n        return 'Starting...';\n      case 'ready':\n      case 'listening':\n        return 'Voice Active';\n      case 'offline':\n      default:\n        return 'Start Voice';\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col items-center space-y-2\",\n    children: [/*#__PURE__*/_jsxDEV(motion.button, {\n      type: \"button\",\n      onClick: micStatus === 'offline' || micStatus === 'requesting' ? handleStartVoice : handleStopVoice,\n      disabled: micStatus === 'requesting',\n      whileHover: {\n        scale: micStatus !== 'requesting' ? 1.05 : 1\n      },\n      whileTap: {\n        scale: micStatus !== 'requesting' ? 0.95 : 1\n      },\n      className: `p-4 rounded-full transition-all duration-300 ${getButtonStyle()}`,\n      title: getStatusText(),\n      children: /*#__PURE__*/_jsxDEV(MicrophoneIcon, {\n        className: \"w-6 h-6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `text-xs px-3 py-1 rounded-full ${micStatus === 'listening' || micStatus === 'ready' ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' : micStatus === 'requesting' ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200' : 'bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400'}`,\n      children: getStatusText()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), micStatus === 'offline' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `text-xs text-center max-w-xs ${darkMode ? 'text-gray-400' : 'text-gray-500'}`,\n      children: \"Click to grant microphone permission and start voice chat\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }, this), micStatus === 'listening' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `text-xs text-center max-w-xs ${darkMode ? 'text-green-400' : 'text-green-600'}`,\n      children: \"\\uD83C\\uDFA4 Ready! Say \\\"Hey Buddy\\\" to start talking\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 5\n  }, this);\n};\n_s(VoiceControl, \"ZPNE6BImRe/oCqdCXudHRb87r7g=\");\n_c = VoiceControl;\nexport default VoiceControl;\nvar _c;\n$RefreshReg$(_c, \"VoiceControl\");","map":{"version":3,"names":["React","useState","motion","MicrophoneIcon","jsxDEV","_jsxDEV","VoiceControl","onStartAmbientListening","onStopAmbientListening","darkMode","_s","micStatus","setMicStatus","handleStartVoice","console","log","stream","navigator","mediaDevices","getUserMedia","audio","echoCancellation","noiseSuppression","sampleRate","success","error","name","alert","handleStopVoice","getButtonStyle","getStatusText","getButtonText","className","children","button","type","onClick","disabled","whileHover","scale","whileTap","title","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/app/frontend/src/components/VoiceControl.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { MicrophoneIcon } from '@heroicons/react/24/outline';\n\nconst VoiceControl = ({ onStartAmbientListening, onStopAmbientListening, darkMode }) => {\n  const [micStatus, setMicStatus] = useState('offline'); // 'offline', 'requesting', 'ready', 'listening'\n\n  const handleStartVoice = async () => {\n    console.log('🎤 User clicked Start Voice button');\n    setMicStatus('requesting');\n    \n    try {\n      console.log('🎤 Requesting microphone permission...');\n      \n      // Request microphone permission with explicit user gesture\n      const stream = await navigator.mediaDevices.getUserMedia({ \n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          sampleRate: 44100\n        } \n      });\n      \n      console.log('✅ Microphone permission granted!');\n      \n      // Permission granted: proceed with ambient listening\n      const success = await onStartAmbientListening(stream);\n      \n      if (success) {\n        setMicStatus('listening');\n        console.log('🎤 Ambient listening started - ready for \"Hey Buddy\"');\n      } else {\n        setMicStatus('offline');\n        console.error('❌ Failed to start ambient listening');\n      }\n      \n    } catch (error) {\n      console.error('❌ Microphone permission denied:', error);\n      setMicStatus('offline');\n      \n      // Provide user guidance\n      if (error.name === 'NotAllowedError') {\n        alert('🎤 Microphone access denied. Please:\\n1. Click the microphone icon in your browser address bar\\n2. Select \"Allow\"\\n3. Refresh the page and try again');\n      } else {\n        alert('🎤 Could not access microphone. Please check your device settings and try again.');\n      }\n    }\n  };\n\n  const handleStopVoice = () => {\n    console.log('🔇 User clicked Stop Voice button');\n    onStopAmbientListening();\n    setMicStatus('offline');\n  };\n\n  const getButtonStyle = () => {\n    switch (micStatus) {\n      case 'ready':\n      case 'listening':\n        return 'bg-green-500 text-white shadow-lg shadow-green-500/25 hover:bg-green-600';\n      case 'requesting':\n        return 'bg-yellow-500 text-white shadow-lg shadow-yellow-500/25 animate-pulse';\n      case 'offline':\n      default:\n        return darkMode \n          ? 'bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white' \n          : 'bg-gray-200 text-gray-600 hover:bg-gray-300';\n    }\n  };\n\n  const getStatusText = () => {\n    switch (micStatus) {\n      case 'requesting':\n        return 'Requesting permission...';\n      case 'ready':\n        return 'Voice ready - waiting for wake word';\n      case 'listening':\n        return 'Always On - Say \"Hey Buddy\"';\n      case 'offline':\n      default:\n        return 'Offline';\n    }\n  };\n\n  const getButtonText = () => {\n    switch (micStatus) {\n      case 'requesting':\n        return 'Starting...';\n      case 'ready':\n      case 'listening':\n        return 'Voice Active';\n      case 'offline':\n      default:\n        return 'Start Voice';\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col items-center space-y-2\">\n      <motion.button\n        type=\"button\"\n        onClick={micStatus === 'offline' || micStatus === 'requesting' ? handleStartVoice : handleStopVoice}\n        disabled={micStatus === 'requesting'}\n        whileHover={{ scale: micStatus !== 'requesting' ? 1.05 : 1 }}\n        whileTap={{ scale: micStatus !== 'requesting' ? 0.95 : 1 }}\n        className={`p-4 rounded-full transition-all duration-300 ${getButtonStyle()}`}\n        title={getStatusText()}\n      >\n        <MicrophoneIcon className=\"w-6 h-6\" />\n      </motion.button>\n      \n      {/* Status indicator */}\n      <div className={`text-xs px-3 py-1 rounded-full ${\n        micStatus === 'listening' || micStatus === 'ready' \n          ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200'\n          : micStatus === 'requesting'\n          ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200'\n          : 'bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400'\n      }`}>\n        {getStatusText()}\n      </div>\n\n      {/* Instructions for first-time users */}\n      {micStatus === 'offline' && (\n        <div className={`text-xs text-center max-w-xs ${\n          darkMode ? 'text-gray-400' : 'text-gray-500'\n        }`}>\n          Click to grant microphone permission and start voice chat\n        </div>\n      )}\n      \n      {micStatus === 'listening' && (\n        <div className={`text-xs text-center max-w-xs ${\n          darkMode ? 'text-green-400' : 'text-green-600'\n        }`}>\n          🎤 Ready! Say \"Hey Buddy\" to start talking\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default VoiceControl;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}