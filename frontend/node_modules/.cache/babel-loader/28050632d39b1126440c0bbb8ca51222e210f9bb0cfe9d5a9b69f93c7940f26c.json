{"ast":null,"code":"var _jsxFileName = \"/app/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { BrowserRouter, Routes, Route, Navigate } from 'react-router-dom';\nimport { motion } from 'framer-motion';\nimport toast from 'react-hot-toast';\nimport { v4 as uuidv4 } from 'uuid';\nimport Layout from './components/Layout';\nimport Header from './components/Header';\nimport ProfileSetup from './components/ProfileSetup';\nimport ParentalControls from './components/ParentalControls';\nimport SimplifiedChatInterface from './components/SimplifiedChatInterface';\nimport StoriesPage from './components/StoriesPage';\nimport ProfilePage from './components/ProfilePage';\nimport SettingsPage from './components/SettingsPage';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nconst API = `${BACKEND_URL}/api`;\nconst App = () => {\n  _s();\n  const [user, setUser] = useState(null);\n  const [sessionId, setSessionId] = useState(null);\n  const [isProfileSetupOpen, setIsProfileSetupOpen] = useState(false);\n  const [isParentalControlsOpen, setIsParentalControlsOpen] = useState(false);\n  const [parentalControls, setParentalControls] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [darkMode, setDarkMode] = useState(() => {\n    // Check localStorage for dark mode preference\n    const saved = localStorage.getItem('ai_companion_dark_mode');\n    return saved ? JSON.parse(saved) : false;\n  });\n  const [chatMessages, setChatMessages] = useState([]);\n  const [chatHistory, setChatHistory] = useState({});\n  useEffect(() => {\n    checkUserProfile();\n  }, []);\n  useEffect(() => {\n    // Save dark mode preference to localStorage\n    localStorage.setItem('ai_companion_dark_mode', JSON.stringify(darkMode));\n  }, [darkMode]);\n\n  // Load chat history when session changes\n  useEffect(() => {\n    if (sessionId && user !== null && user !== void 0 && user.id) {\n      loadChatHistory(sessionId);\n    }\n  }, [sessionId, user === null || user === void 0 ? void 0 : user.id]);\n  const loadChatHistory = async currentSessionId => {\n    try {\n      // First try to load from localStorage\n      const savedHistory = localStorage.getItem(`chat_history_${user === null || user === void 0 ? void 0 : user.id}_${currentSessionId}`);\n      if (savedHistory) {\n        const messages = JSON.parse(savedHistory);\n        setChatMessages(messages);\n        setChatHistory(prev => ({\n          ...prev,\n          [currentSessionId]: messages\n        }));\n      } else {\n        // Initialize with welcome message if no history exists\n        const welcomeMessage = {\n          id: Date.now(),\n          type: 'bot',\n          content: `Hi ${user === null || user === void 0 ? void 0 : user.name}! ðŸ‘‹ I'm Buddy, your AI companion. How can I help you today?`,\n          timestamp: new Date().toISOString()\n        };\n        setChatMessages([welcomeMessage]);\n        setChatHistory(prev => ({\n          ...prev,\n          [currentSessionId]: [welcomeMessage]\n        }));\n      }\n    } catch (error) {\n      console.error('Error loading chat history:', error);\n      // Fallback welcome message\n      const welcomeMessage = {\n        id: Date.now(),\n        type: 'bot',\n        content: `Hi ${user === null || user === void 0 ? void 0 : user.name}! ðŸ‘‹ I'm Buddy, your AI companion. How can I help you today?`,\n        timestamp: new Date().toISOString()\n      };\n      setChatMessages([welcomeMessage]);\n    }\n  };\n  const saveChatHistory = (currentSessionId, messages) => {\n    try {\n      localStorage.setItem(`chat_history_${user === null || user === void 0 ? void 0 : user.id}_${currentSessionId}`, JSON.stringify(messages));\n      setChatHistory(prev => ({\n        ...prev,\n        [currentSessionId]: messages\n      }));\n    } catch (error) {\n      console.error('Error saving chat history:', error);\n    }\n  };\n  const addMessage = message => {\n    const newMessage = {\n      ...message,\n      id: Date.now(),\n      timestamp: new Date().toISOString()\n    };\n    setChatMessages(prev => {\n      const updated = [...prev, newMessage];\n      // Save to localStorage\n      if (sessionId) {\n        saveChatHistory(sessionId, updated);\n      }\n      return updated;\n    });\n  };\n  const checkUserProfile = async () => {\n    try {\n      // Check if user profile exists in localStorage\n      const savedUser = localStorage.getItem('ai_companion_user');\n      if (!savedUser) {\n        // No user exists, open profile setup\n        setIsProfileSetupOpen(true);\n        setIsLoading(false);\n        return;\n      }\n\n      // User exists in localStorage, verify it exists in backend\n      const userData = JSON.parse(savedUser);\n      try {\n        // Verify user exists in backend database\n        const response = await fetch(`${API}/users/profile/${userData.id}`, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        if (response.ok) {\n          // User exists in backend, proceed normally\n          const backendUser = await response.json();\n          setUser(backendUser);\n          await createSession(backendUser.id);\n          await loadParentalControls(backendUser.id);\n        } else {\n          // User doesn't exist in backend, clear localStorage and show setup\n          localStorage.removeItem('ai_companion_user');\n          setIsProfileSetupOpen(true);\n        }\n      } catch (error) {\n        console.error('Error verifying user profile with backend:', error);\n        // Network error, clear localStorage and show setup\n        localStorage.removeItem('ai_companion_user');\n        setIsProfileSetupOpen(true);\n      }\n    } catch (error) {\n      console.error('Error checking user profile:', error);\n      setIsProfileSetupOpen(true);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const createSession = async userId => {\n    try {\n      const response = await fetch(`${API}/conversations/session`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          user_id: userId,\n          session_name: 'Chat Session'\n        })\n      });\n      const data = await response.json();\n      if (response.ok) {\n        setSessionId(data.id);\n      } else {\n        throw new Error(data.detail || 'Failed to create session');\n      }\n    } catch (error) {\n      console.error('Error creating session:', error);\n      toast.error('Failed to create chat session');\n    }\n  };\n  const loadParentalControls = async userId => {\n    try {\n      const response = await fetch(`${API}/users/${userId}/parental-controls`);\n      const data = await response.json();\n      if (response.ok) {\n        setParentalControls(data);\n      }\n    } catch (error) {\n      console.error('Error loading parental controls:', error);\n    }\n  };\n  const saveUserProfile = async profileData => {\n    try {\n      // Filter profile data to only include fields that backend accepts\n      const backendProfileData = {\n        name: profileData.name,\n        age: profileData.age,\n        location: profileData.location,\n        timezone: profileData.timezone || 'UTC',\n        language: profileData.language || 'english',\n        voice_personality: profileData.voice_personality || 'friendly_companion',\n        interests: profileData.interests || [],\n        learning_goals: profileData.learning_goals || [],\n        parent_email: profileData.parent_email || null\n      };\n      console.log('Saving profile data:', backendProfileData);\n      const response = await fetch(`${API}/users/profile`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(backendProfileData)\n      });\n      const data = await response.json();\n      console.log('Profile save response:', {\n        status: response.status,\n        data\n      });\n      if (response.ok) {\n        setUser(data);\n        localStorage.setItem('ai_companion_user', JSON.stringify(data));\n        await createSession(data.id);\n        await loadParentalControls(data.id);\n        toast.success('Profile created successfully!');\n      } else {\n        console.error('Profile save failed:', response.status, data);\n        throw new Error(data.detail || `Failed to create profile (HTTP ${response.status})`);\n      }\n    } catch (error) {\n      console.error('Error saving profile:', error);\n      toast.error(`Failed to save profile: ${error.message}`);\n      throw error;\n    }\n  };\n  const updateUserProfile = async profileData => {\n    try {\n      if (!(user !== null && user !== void 0 && user.id)) {\n        throw new Error('No user profile to update');\n      }\n\n      // Filter profile data to only include fields that backend accepts\n      const backendProfileData = {\n        name: profileData.name,\n        age: profileData.age,\n        location: profileData.location,\n        timezone: profileData.timezone || 'UTC',\n        language: profileData.language || 'english',\n        voice_personality: profileData.voice_personality || 'friendly_companion',\n        interests: profileData.interests || [],\n        learning_goals: profileData.learning_goals || [],\n        parent_email: profileData.parent_email || null\n      };\n      console.log('Updating profile data for user:', user.id, backendProfileData);\n      const response = await fetch(`${API}/users/profile/${user.id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(backendProfileData)\n      });\n      const data = await response.json();\n      console.log('Profile update response:', {\n        status: response.status,\n        data\n      });\n      if (response.ok) {\n        setUser(data);\n        localStorage.setItem('ai_companion_user', JSON.stringify(data));\n        toast.success('Profile updated successfully!');\n      } else {\n        console.error('Profile update failed:', response.status, data);\n        throw new Error(data.detail || `Failed to update profile (HTTP ${response.status})`);\n      }\n    } catch (error) {\n      console.error('Error updating profile:', error);\n      toast.error(`Failed to update profile: ${error.message}`);\n      throw error;\n    }\n  };\n  const deleteUserProfile = async () => {\n    try {\n      if (!(user !== null && user !== void 0 && user.id)) {\n        throw new Error('No user profile to delete');\n      }\n      const response = await fetch(`${API}/users/profile/${user.id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (response.ok) {\n        // Clear user data and redirect to setup\n        setUser(null);\n        setSessionId(null);\n        localStorage.removeItem('ai_companion_user');\n        setIsProfileSetupOpen(true);\n        toast.success('Profile deleted successfully!');\n      } else {\n        const data = await response.json();\n        throw new Error(data.detail || 'Failed to delete profile');\n      }\n    } catch (error) {\n      console.error('Error deleting profile:', error);\n      toast.error('Failed to delete profile');\n      throw error;\n    }\n  };\n  const saveParentalControls = async controlsData => {\n    try {\n      const response = await fetch(`${API}/users/${user.id}/parental-controls`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(controlsData)\n      });\n      const data = await response.json();\n      if (response.ok) {\n        setParentalControls(data);\n        toast.success('Parental controls updated successfully!');\n      } else {\n        throw new Error(data.detail || 'Failed to update parental controls');\n      }\n    } catch (error) {\n      console.error('Error updating parental controls:', error);\n      throw error;\n    }\n  };\n  const WelcomeScreen = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen flex items-center justify-center p-4\",\n    children: /*#__PURE__*/_jsxDEV(motion.div, {\n      initial: {\n        opacity: 0,\n        scale: 0.9\n      },\n      animate: {\n        opacity: 1,\n        scale: 1\n      },\n      transition: {\n        duration: 0.5\n      },\n      className: \"max-w-4xl mx-auto text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-12\",\n        children: [/*#__PURE__*/_jsxDEV(motion.div, {\n          initial: {\n            y: -20,\n            opacity: 0\n          },\n          animate: {\n            y: 0,\n            opacity: 1\n          },\n          transition: {\n            delay: 0.2\n          },\n          className: \"w-24 h-24 bg-gradient-to-br from-blue-500 to-purple-600 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-2xl\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-12 h-12 text-white\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(motion.h1, {\n          initial: {\n            y: -20,\n            opacity: 0\n          },\n          animate: {\n            y: 0,\n            opacity: 1\n          },\n          transition: {\n            delay: 0.3\n          },\n          className: \"text-4xl md:text-6xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-4\",\n          children: \"Meet Your AI Buddy\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(motion.p, {\n          initial: {\n            y: -20,\n            opacity: 0\n          },\n          animate: {\n            y: 0,\n            opacity: 1\n          },\n          transition: {\n            delay: 0.4\n          },\n          className: \"text-xl text-gray-600 max-w-2xl mx-auto mb-8\",\n          children: \"Your smart companion for stories, songs, learning, and fun conversations. Safe, educational, and designed just for you!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          y: 20,\n          opacity: 0\n        },\n        animate: {\n          y: 0,\n          opacity: 1\n        },\n        transition: {\n          delay: 0.5\n        },\n        className: \"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-gray-100\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-4\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-6 h-6 text-blue-600\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 016 0v6a3 3 0 01-3 3z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 394,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-900 mb-2\",\n            children: \"Voice Chat\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600\",\n            children: \"Talk naturally with your AI companion using voice messages and responses.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-gray-100\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mx-auto mb-4\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-6 h-6 text-purple-600\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 404,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-900 mb-2\",\n            children: \"Stories & Songs\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600\",\n            children: \"Enjoy bedtime stories, nursery rhymes, and educational content.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-gray-100\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-4\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-6 h-6 text-green-600\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 414,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-900 mb-2\",\n            children: \"Safe & Secure\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600\",\n            children: \"Built with child safety in mind, with parental controls and monitoring.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(motion.button, {\n        initial: {\n          y: 20,\n          opacity: 0\n        },\n        animate: {\n          y: 0,\n          opacity: 1\n        },\n        transition: {\n          delay: 0.6\n        },\n        onClick: () => setIsProfileSetupOpen(true),\n        className: \"px-8 py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-2xl text-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-xl hover:shadow-2xl transform hover:scale-105\",\n        children: \"Get Started\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 344,\n    columnNumber: 5\n  }, this);\n  const ChatPage = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-screen flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      user: user,\n      onOpenProfile: () => setIsProfileSetupOpen(true),\n      onOpenSettings: () => setIsParentalControlsOpen(true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 overflow-hidden\",\n      children: /*#__PURE__*/_jsxDEV(SimplifiedChatInterface, {\n        user: user,\n        sessionId: sessionId,\n        darkMode: darkMode,\n        setDarkMode: setDarkMode,\n        messages: chatMessages,\n        onAddMessage: addMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 437,\n    columnNumber: 5\n  }, this);\n  const StoriesPageWrapper = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-screen flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      user: user,\n      onOpenProfile: () => setIsProfileSetupOpen(true),\n      onOpenSettings: () => setIsParentalControlsOpen(true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 overflow-auto\",\n      children: /*#__PURE__*/_jsxDEV(StoriesPage, {\n        user: user,\n        sessionId: sessionId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 463,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 457,\n    columnNumber: 5\n  }, this);\n  const ProfilePageWrapper = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-screen flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      user: user,\n      onOpenProfile: () => setIsProfileSetupOpen(true),\n      onOpenSettings: () => setIsParentalControlsOpen(true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 overflow-auto\",\n      children: /*#__PURE__*/_jsxDEV(ProfilePage, {\n        user: user,\n        onOpenProfileSetup: () => setIsProfileSetupOpen(true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 480,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 479,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 473,\n    columnNumber: 5\n  }, this);\n  const SettingsPageWrapper = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-screen flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      user: user,\n      onOpenProfile: () => setIsProfileSetupOpen(true),\n      onOpenSettings: () => setIsParentalControlsOpen(true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 490,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 overflow-auto\",\n      children: /*#__PURE__*/_jsxDEV(SettingsPage, {\n        user: user,\n        onOpenProfile: () => setIsProfileSetupOpen(true),\n        onOpenParentalControls: () => setIsParentalControlsOpen(true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 496,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 495,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 489,\n    columnNumber: 5\n  }, this);\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(Layout, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"min-h-screen flex items-center justify-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 510,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600\",\n            children: \"Loading your AI companion...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 511,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 508,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 507,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: [/*#__PURE__*/_jsxDEV(BrowserRouter, {\n      children: /*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/\",\n          element: user ? /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/chat\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 43\n          }, this) : /*#__PURE__*/_jsxDEV(WelcomeScreen, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 69\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 522,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/chat\",\n          element: user ? /*#__PURE__*/_jsxDEV(ChatPage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 523,\n            columnNumber: 47\n          }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 523,\n            columnNumber: 62\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/stories\",\n          element: user ? /*#__PURE__*/_jsxDEV(StoriesPageWrapper, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 524,\n            columnNumber: 50\n          }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 524,\n            columnNumber: 75\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 524,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/profile\",\n          element: user ? /*#__PURE__*/_jsxDEV(ProfilePageWrapper, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 525,\n            columnNumber: 50\n          }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 525,\n            columnNumber: 75\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/settings\",\n          element: user ? /*#__PURE__*/_jsxDEV(SettingsPageWrapper, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 526,\n            columnNumber: 51\n          }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 526,\n            columnNumber: 77\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 520,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ProfileSetup, {\n      isOpen: isProfileSetupOpen,\n      onClose: () => setIsProfileSetupOpen(false),\n      onSave: user ? updateUserProfile : saveUserProfile,\n      onDelete: user ? deleteUserProfile : null,\n      initialData: user\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 531,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ParentalControls, {\n      isOpen: isParentalControlsOpen,\n      onClose: () => setIsParentalControlsOpen(false),\n      userId: user === null || user === void 0 ? void 0 : user.id,\n      controls: parentalControls,\n      onSave: saveParentalControls\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 539,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 519,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"O8Ymfg47cpLIdJoM+nDQPrLT5fQ=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Routes","Route","Navigate","motion","toast","v4","uuidv4","Layout","Header","ProfileSetup","ParentalControls","SimplifiedChatInterface","StoriesPage","ProfilePage","SettingsPage","jsxDEV","_jsxDEV","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","API","App","_s","user","setUser","sessionId","setSessionId","isProfileSetupOpen","setIsProfileSetupOpen","isParentalControlsOpen","setIsParentalControlsOpen","parentalControls","setParentalControls","isLoading","setIsLoading","darkMode","setDarkMode","saved","localStorage","getItem","JSON","parse","chatMessages","setChatMessages","chatHistory","setChatHistory","checkUserProfile","setItem","stringify","id","loadChatHistory","currentSessionId","savedHistory","messages","prev","welcomeMessage","Date","now","type","content","name","timestamp","toISOString","error","console","saveChatHistory","addMessage","message","newMessage","updated","savedUser","userData","response","fetch","method","headers","ok","backendUser","json","createSession","loadParentalControls","removeItem","userId","body","user_id","session_name","data","Error","detail","saveUserProfile","profileData","backendProfileData","age","location","timezone","language","voice_personality","interests","learning_goals","parent_email","log","status","success","updateUserProfile","deleteUserProfile","saveParentalControls","controlsData","WelcomeScreen","className","children","div","initial","opacity","scale","animate","transition","duration","y","delay","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","fileName","_jsxFileName","lineNumber","columnNumber","h1","p","button","onClick","ChatPage","onOpenProfile","onOpenSettings","onAddMessage","StoriesPageWrapper","ProfilePageWrapper","onOpenProfileSetup","SettingsPageWrapper","onOpenParentalControls","path","element","to","isOpen","onClose","onSave","onDelete","initialData","controls","_c","$RefreshReg$"],"sources":["/app/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter, Routes, Route, Navigate } from 'react-router-dom';\nimport { motion } from 'framer-motion';\nimport toast from 'react-hot-toast';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport Layout from './components/Layout';\nimport Header from './components/Header';\nimport ProfileSetup from './components/ProfileSetup';\nimport ParentalControls from './components/ParentalControls';\nimport SimplifiedChatInterface from './components/SimplifiedChatInterface';\nimport StoriesPage from './components/StoriesPage';\nimport ProfilePage from './components/ProfilePage';\nimport SettingsPage from './components/SettingsPage';\n\nimport './App.css';\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nconst API = `${BACKEND_URL}/api`;\n\nconst App = () => {\n  const [user, setUser] = useState(null);\n  const [sessionId, setSessionId] = useState(null);\n  const [isProfileSetupOpen, setIsProfileSetupOpen] = useState(false);\n  const [isParentalControlsOpen, setIsParentalControlsOpen] = useState(false);\n  const [parentalControls, setParentalControls] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [darkMode, setDarkMode] = useState(() => {\n    // Check localStorage for dark mode preference\n    const saved = localStorage.getItem('ai_companion_dark_mode');\n    return saved ? JSON.parse(saved) : false;\n  });\n  const [chatMessages, setChatMessages] = useState([]);\n  const [chatHistory, setChatHistory] = useState({});\n\n  useEffect(() => {\n    checkUserProfile();\n  }, []);\n\n  useEffect(() => {\n    // Save dark mode preference to localStorage\n    localStorage.setItem('ai_companion_dark_mode', JSON.stringify(darkMode));\n  }, [darkMode]);\n\n  // Load chat history when session changes\n  useEffect(() => {\n    if (sessionId && user?.id) {\n      loadChatHistory(sessionId);\n    }\n  }, [sessionId, user?.id]);\n\n  const loadChatHistory = async (currentSessionId) => {\n    try {\n      // First try to load from localStorage\n      const savedHistory = localStorage.getItem(`chat_history_${user?.id}_${currentSessionId}`);\n      if (savedHistory) {\n        const messages = JSON.parse(savedHistory);\n        setChatMessages(messages);\n        setChatHistory(prev => ({ ...prev, [currentSessionId]: messages }));\n      } else {\n        // Initialize with welcome message if no history exists\n        const welcomeMessage = {\n          id: Date.now(),\n          type: 'bot',\n          content: `Hi ${user?.name}! ðŸ‘‹ I'm Buddy, your AI companion. How can I help you today?`,\n          timestamp: new Date().toISOString()\n        };\n        setChatMessages([welcomeMessage]);\n        setChatHistory(prev => ({ ...prev, [currentSessionId]: [welcomeMessage] }));\n      }\n    } catch (error) {\n      console.error('Error loading chat history:', error);\n      // Fallback welcome message\n      const welcomeMessage = {\n        id: Date.now(),\n        type: 'bot',\n        content: `Hi ${user?.name}! ðŸ‘‹ I'm Buddy, your AI companion. How can I help you today?`,\n        timestamp: new Date().toISOString()\n      };\n      setChatMessages([welcomeMessage]);\n    }\n  };\n\n  const saveChatHistory = (currentSessionId, messages) => {\n    try {\n      localStorage.setItem(`chat_history_${user?.id}_${currentSessionId}`, JSON.stringify(messages));\n      setChatHistory(prev => ({ ...prev, [currentSessionId]: messages }));\n    } catch (error) {\n      console.error('Error saving chat history:', error);\n    }\n  };\n\n  const addMessage = (message) => {\n    const newMessage = {\n      ...message,\n      id: Date.now(),\n      timestamp: new Date().toISOString()\n    };\n    \n    setChatMessages(prev => {\n      const updated = [...prev, newMessage];\n      // Save to localStorage\n      if (sessionId) {\n        saveChatHistory(sessionId, updated);\n      }\n      return updated;\n    });\n  };\n\n  const checkUserProfile = async () => {\n    try {\n      // Check if user profile exists in localStorage\n      const savedUser = localStorage.getItem('ai_companion_user');\n      \n      if (!savedUser) {\n        // No user exists, open profile setup\n        setIsProfileSetupOpen(true);\n        setIsLoading(false);\n        return;\n      }\n      \n      // User exists in localStorage, verify it exists in backend\n      const userData = JSON.parse(savedUser);\n      \n      try {\n        // Verify user exists in backend database\n        const response = await fetch(`${API}/users/profile/${userData.id}`, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n        });\n        \n        if (response.ok) {\n          // User exists in backend, proceed normally\n          const backendUser = await response.json();\n          setUser(backendUser);\n          await createSession(backendUser.id);\n          await loadParentalControls(backendUser.id);\n        } else {\n          // User doesn't exist in backend, clear localStorage and show setup\n          localStorage.removeItem('ai_companion_user');\n          setIsProfileSetupOpen(true);\n        }\n      } catch (error) {\n        console.error('Error verifying user profile with backend:', error);\n        // Network error, clear localStorage and show setup\n        localStorage.removeItem('ai_companion_user');\n        setIsProfileSetupOpen(true);\n      }\n    } catch (error) {\n      console.error('Error checking user profile:', error);\n      setIsProfileSetupOpen(true);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const createSession = async (userId) => {\n    try {\n      const response = await fetch(`${API}/conversations/session`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          user_id: userId,\n          session_name: 'Chat Session'\n        })\n      });\n\n      const data = await response.json();\n      if (response.ok) {\n        setSessionId(data.id);\n      } else {\n        throw new Error(data.detail || 'Failed to create session');\n      }\n    } catch (error) {\n      console.error('Error creating session:', error);\n      toast.error('Failed to create chat session');\n    }\n  };\n\n  const loadParentalControls = async (userId) => {\n    try {\n      const response = await fetch(`${API}/users/${userId}/parental-controls`);\n      const data = await response.json();\n      \n      if (response.ok) {\n        setParentalControls(data);\n      }\n    } catch (error) {\n      console.error('Error loading parental controls:', error);\n    }\n  };\n\n  const saveUserProfile = async (profileData) => {\n    try {\n      // Filter profile data to only include fields that backend accepts\n      const backendProfileData = {\n        name: profileData.name,\n        age: profileData.age,\n        location: profileData.location,\n        timezone: profileData.timezone || 'UTC',\n        language: profileData.language || 'english',\n        voice_personality: profileData.voice_personality || 'friendly_companion',\n        interests: profileData.interests || [],\n        learning_goals: profileData.learning_goals || [],\n        parent_email: profileData.parent_email || null\n      };\n\n      console.log('Saving profile data:', backendProfileData);\n\n      const response = await fetch(`${API}/users/profile`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(backendProfileData)\n      });\n\n      const data = await response.json();\n      console.log('Profile save response:', { status: response.status, data });\n\n      if (response.ok) {\n        setUser(data);\n        localStorage.setItem('ai_companion_user', JSON.stringify(data));\n        await createSession(data.id);\n        await loadParentalControls(data.id);\n        toast.success('Profile created successfully!');\n      } else {\n        console.error('Profile save failed:', response.status, data);\n        throw new Error(data.detail || `Failed to create profile (HTTP ${response.status})`);\n      }\n    } catch (error) {\n      console.error('Error saving profile:', error);\n      toast.error(`Failed to save profile: ${error.message}`);\n      throw error;\n    }\n  };\n\n  const updateUserProfile = async (profileData) => {\n    try {\n      if (!user?.id) {\n        throw new Error('No user profile to update');\n      }\n\n      // Filter profile data to only include fields that backend accepts\n      const backendProfileData = {\n        name: profileData.name,\n        age: profileData.age,\n        location: profileData.location,\n        timezone: profileData.timezone || 'UTC',\n        language: profileData.language || 'english',\n        voice_personality: profileData.voice_personality || 'friendly_companion',\n        interests: profileData.interests || [],\n        learning_goals: profileData.learning_goals || [],\n        parent_email: profileData.parent_email || null\n      };\n\n      console.log('Updating profile data for user:', user.id, backendProfileData);\n\n      const response = await fetch(`${API}/users/profile/${user.id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(backendProfileData)\n      });\n\n      const data = await response.json();\n      console.log('Profile update response:', { status: response.status, data });\n\n      if (response.ok) {\n        setUser(data);\n        localStorage.setItem('ai_companion_user', JSON.stringify(data));\n        toast.success('Profile updated successfully!');\n      } else {\n        console.error('Profile update failed:', response.status, data);\n        throw new Error(data.detail || `Failed to update profile (HTTP ${response.status})`);\n      }\n    } catch (error) {\n      console.error('Error updating profile:', error);\n      toast.error(`Failed to update profile: ${error.message}`);\n      throw error;\n    }\n  };\n\n  const deleteUserProfile = async () => {\n    try {\n      if (!user?.id) {\n        throw new Error('No user profile to delete');\n      }\n\n      const response = await fetch(`${API}/users/profile/${user.id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      });\n\n      if (response.ok) {\n        // Clear user data and redirect to setup\n        setUser(null);\n        setSessionId(null);\n        localStorage.removeItem('ai_companion_user');\n        setIsProfileSetupOpen(true);\n        toast.success('Profile deleted successfully!');\n      } else {\n        const data = await response.json();\n        throw new Error(data.detail || 'Failed to delete profile');\n      }\n    } catch (error) {\n      console.error('Error deleting profile:', error);\n      toast.error('Failed to delete profile');\n      throw error;\n    }\n  };\n\n  const saveParentalControls = async (controlsData) => {\n    try {\n      const response = await fetch(`${API}/users/${user.id}/parental-controls`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(controlsData)\n      });\n\n      const data = await response.json();\n      if (response.ok) {\n        setParentalControls(data);\n        toast.success('Parental controls updated successfully!');\n      } else {\n        throw new Error(data.detail || 'Failed to update parental controls');\n      }\n    } catch (error) {\n      console.error('Error updating parental controls:', error);\n      throw error;\n    }\n  };\n\n  const WelcomeScreen = () => (\n    <div className=\"min-h-screen flex items-center justify-center p-4\">\n      <motion.div\n        initial={{ opacity: 0, scale: 0.9 }}\n        animate={{ opacity: 1, scale: 1 }}\n        transition={{ duration: 0.5 }}\n        className=\"max-w-4xl mx-auto text-center\"\n      >\n        {/* Hero Section */}\n        <div className=\"mb-12\">\n          <motion.div\n            initial={{ y: -20, opacity: 0 }}\n            animate={{ y: 0, opacity: 1 }}\n            transition={{ delay: 0.2 }}\n            className=\"w-24 h-24 bg-gradient-to-br from-blue-500 to-purple-600 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-2xl\"\n          >\n            <svg className=\"w-12 h-12 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n            </svg>\n          </motion.div>\n          \n          <motion.h1\n            initial={{ y: -20, opacity: 0 }}\n            animate={{ y: 0, opacity: 1 }}\n            transition={{ delay: 0.3 }}\n            className=\"text-4xl md:text-6xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-4\"\n          >\n            Meet Your AI Buddy\n          </motion.h1>\n          \n          <motion.p\n            initial={{ y: -20, opacity: 0 }}\n            animate={{ y: 0, opacity: 1 }}\n            transition={{ delay: 0.4 }}\n            className=\"text-xl text-gray-600 max-w-2xl mx-auto mb-8\"\n          >\n            Your smart companion for stories, songs, learning, and fun conversations. \n            Safe, educational, and designed just for you!\n          </motion.p>\n        </div>\n\n        {/* Features */}\n        <motion.div\n          initial={{ y: 20, opacity: 0 }}\n          animate={{ y: 0, opacity: 1 }}\n          transition={{ delay: 0.5 }}\n          className=\"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12\"\n        >\n          <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-gray-100\">\n            <div className=\"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-4\">\n              <svg className=\"w-6 h-6 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 016 0v6a3 3 0 01-3 3z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Voice Chat</h3>\n            <p className=\"text-gray-600\">Talk naturally with your AI companion using voice messages and responses.</p>\n          </div>\n\n          <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-gray-100\">\n            <div className=\"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mx-auto mb-4\">\n              <svg className=\"w-6 h-6 text-purple-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\" />\n              </svg>\n            </div>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Stories & Songs</h3>\n            <p className=\"text-gray-600\">Enjoy bedtime stories, nursery rhymes, and educational content.</p>\n          </div>\n\n          <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-gray-100\">\n            <div className=\"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-4\">\n              <svg className=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Safe & Secure</h3>\n            <p className=\"text-gray-600\">Built with child safety in mind, with parental controls and monitoring.</p>\n          </div>\n        </motion.div>\n\n        {/* CTA Button */}\n        <motion.button\n          initial={{ y: 20, opacity: 0 }}\n          animate={{ y: 0, opacity: 1 }}\n          transition={{ delay: 0.6 }}\n          onClick={() => setIsProfileSetupOpen(true)}\n          className=\"px-8 py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-2xl text-lg font-semibold hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-xl hover:shadow-2xl transform hover:scale-105\"\n        >\n          Get Started\n        </motion.button>\n      </motion.div>\n    </div>\n  );\n\n  const ChatPage = () => (\n    <div className=\"h-screen flex flex-col\">\n      <Header \n        user={user} \n        onOpenProfile={() => setIsProfileSetupOpen(true)}\n        onOpenSettings={() => setIsParentalControlsOpen(true)}\n      />\n      <div className=\"flex-1 overflow-hidden\">\n        <SimplifiedChatInterface \n          user={user} \n          sessionId={sessionId}\n          darkMode={darkMode}\n          setDarkMode={setDarkMode}\n          messages={chatMessages}\n          onAddMessage={addMessage}\n        />\n      </div>\n    </div>\n  );\n\n  const StoriesPageWrapper = () => (\n    <div className=\"h-screen flex flex-col\">\n      <Header \n        user={user} \n        onOpenProfile={() => setIsProfileSetupOpen(true)}\n        onOpenSettings={() => setIsParentalControlsOpen(true)}\n      />\n      <div className=\"flex-1 overflow-auto\">\n        <StoriesPage \n          user={user} \n          sessionId={sessionId}\n        />\n      </div>\n    </div>\n  );\n\n  const ProfilePageWrapper = () => (\n    <div className=\"h-screen flex flex-col\">\n      <Header \n        user={user} \n        onOpenProfile={() => setIsProfileSetupOpen(true)}\n        onOpenSettings={() => setIsParentalControlsOpen(true)}\n      />\n      <div className=\"flex-1 overflow-auto\">\n        <ProfilePage \n          user={user} \n          onOpenProfileSetup={() => setIsProfileSetupOpen(true)}\n        />\n      </div>\n    </div>\n  );\n\n  const SettingsPageWrapper = () => (\n    <div className=\"h-screen flex flex-col\">\n      <Header \n        user={user} \n        onOpenProfile={() => setIsProfileSetupOpen(true)}\n        onOpenSettings={() => setIsParentalControlsOpen(true)}\n      />\n      <div className=\"flex-1 overflow-auto\">\n        <SettingsPage \n          user={user} \n          onOpenProfile={() => setIsProfileSetupOpen(true)}\n          onOpenParentalControls={() => setIsParentalControlsOpen(true)}\n        />\n      </div>\n    </div>\n  );\n\n  if (isLoading) {\n    return (\n      <Layout>\n        <div className=\"min-h-screen flex items-center justify-center\">\n          <div className=\"text-center\">\n            <div className=\"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n            <p className=\"text-gray-600\">Loading your AI companion...</p>\n          </div>\n        </div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <BrowserRouter>\n        <Routes>\n          <Route path=\"/\" element={user ? <Navigate to=\"/chat\" /> : <WelcomeScreen />} />\n          <Route path=\"/chat\" element={user ? <ChatPage /> : <Navigate to=\"/\" />} />\n          <Route path=\"/stories\" element={user ? <StoriesPageWrapper /> : <Navigate to=\"/\" />} />\n          <Route path=\"/profile\" element={user ? <ProfilePageWrapper /> : <Navigate to=\"/\" />} />\n          <Route path=\"/settings\" element={user ? <SettingsPageWrapper /> : <Navigate to=\"/\" />} />\n        </Routes>\n      </BrowserRouter>\n\n      {/* Modals */}\n      <ProfileSetup\n        isOpen={isProfileSetupOpen}\n        onClose={() => setIsProfileSetupOpen(false)}\n        onSave={user ? updateUserProfile : saveUserProfile}\n        onDelete={user ? deleteUserProfile : null}\n        initialData={user}\n      />\n\n      <ParentalControls\n        isOpen={isParentalControlsOpen}\n        onClose={() => setIsParentalControlsOpen(false)}\n        userId={user?.id}\n        controls={parentalControls}\n        onSave={saveParentalControls}\n      />\n    </Layout>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}